<div class="exam-terminal-container">
  <div class="header">
    <button mat-icon-button (click)="goBack()" class="back-button">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <div class="header-content">
      <h2>{{ examId }}</h2>
    </div>
    <div class="header-actions">
      <button mat-button (click)="toggleSolution()">
        <mat-icon>{{ showSolution ? 'visibility_off' : 'visibility' }}</mat-icon>
        {{ showSolution ? 'Hide' : 'Show' }} Solution
      </button>
      <button mat-raised-button color="primary" (click)="nextQuestion()">
        Next Question
        <mat-icon>arrow_forward</mat-icon>
      </button>
    </div>
  </div>

  <div class="content-area">
    <div class="question-panel">
      @if (isLoading) {
        <div class="loading">
          <mat-spinner></mat-spinner>
          <p>Loading question...</p>
        </div>
      } @else if (currentQuestion) {
        <mat-card>
          <mat-card-header>
            <mat-card-title>Question {{ currentQuestion.questionNumber }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="question-text">
              <p>{{ currentQuestion.questionText }}</p>
            </div>
            @if (showSolution) {
              <div class="solution">
                <h3>Solution:</h3>
                <pre>{{ currentQuestion.solution }}</pre>
              </div>
            }
          </mat-card-content>
          <mat-card-actions>
            <button mat-button (click)="giveUp()" [disabled]="showSolution">
              <mat-icon>help</mat-icon>
              Give Up
            </button>
          </mat-card-actions>
        </mat-card>
      }
    </div>

    <div class="terminal-panel">
      <div class="terminal-container">
        <div #terminal class="terminal"></div>
      </div>
    </div>
  </div>
</div>
