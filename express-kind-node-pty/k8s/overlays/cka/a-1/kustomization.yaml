apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: cka-a-1

bases:
  - ../../../base/ssh-bastion

namePrefix: cka-a-1-

commonLabels:
  exam-type: cka
  exam-set: a
  question-number: "1"

patches:
  - patch: |-
      - op: replace
        path: /metadata/name
        value: cka-a-1
    target:
      kind: Namespace
  - patch: |-
      - op: replace
        path: /spec/ports/0/nodePort
        value: 30001
    target:
      kind: Service
      name: ssh-bastion
  - patch: |-
      - op: replace
        path: /data/CLUSTER_NAME
        value: kind-cka-a-1
      - op: replace
        path: /data/EXAM_TYPE
        value: cka
      - op: replace
        path: /data/CLUSTER_TYPE
        value: multi-node
    target:
      kind: ConfigMap
      name: cluster-config
